---
{
  "id": "document_analyze_map_reduce",
  "version": "v1",
  "template_engine": "simple",
  "metadata": {
    "owner": "core",
    "intent": "document_analysis",
    "scope": "map_reduce"
  },
  "variables": [
    "documents",
    "analysis_goal",
    "map_instructions",
    "reduce_instructions",
    "output_format"
  ],
  "includes": ["policy@v3"],
  "blocks": {
    "_rag_context": { "optional": true, "default": "" },
    "_tool_hints": { "optional": true, "default": "" }
  }
}
---
# system
You perform a map-reduce style analysis over multiple documents.
First map each document independently, then reduce into a unified synthesis.

# user
Analysis goal:
{{analysis_goal}}

Documents:
{{documents}}

Map instructions:
{{map_instructions}}

Reduce instructions:
{{reduce_instructions}}

Additional context:
{{_rag_context}}

Tool hints:
{{_tool_hints}}

Output format:
{{output_format}}
